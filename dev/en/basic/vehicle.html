<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4. Vehicle Routing &#8212; Workshop - FOSS4G Auckland - Routing with pgRouting</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=5a695559" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_collapse.css?v=226d88b4" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=fa3951f0" />
    <script src="../_static/documentation_options.js?v=fd79a9fb"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. SQL function" href="sql_function.html" />
    <link rel="prev" title="3. Pedestrian Routing" href="pedestrian.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../_static/bootstrap-2.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="../index.html">
          Workshop FOSS4G Auckland</a>
        <span class="navbar-text pull-left"><b>3.1</b></span>

        <div class="nav-collapse">
          <ul class="nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://docs.pgrouting.org/latest/en/index.html">Documentation</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Chapters <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../general-intro/introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general-intro/osgeolive.html">2. OSGeoLive Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general-intro/overview.html">3. Software and Data Overview</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="data.html">1. Prepare Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="graphs.html">2. Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="pedestrian.html">3. Pedestrian Routing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. Vehicle Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="sql_function.html">5. SQL function</a></li>
<li class="toctree-l1"><a class="reference internal" href="withPoints.html">6. Routing using points</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../un_sdg/data.html">1. Data for Sustainable Development Goals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../un_sdg/introduction.html">2. Achieving Sustainable Development Goals with pgRouting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../un_sdg/sdg3-health.html">3. Good Health and Well Being</a></li>
<li class="toctree-l1"><a class="reference internal" href="../un_sdg/sdg7-energy.html">4. Affordable and Clean Energy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../un_sdg/sdg11-cities.html">5. Sustainable Cities and Communities</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../interactions/chapter-9.html">1. Using Qgis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactions/chapter-10.html">2. WMS server with GeoServer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactions/chapter-11.html">3. OpenLayers Based Routing Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/chapter-12.html">4. Create a Network Topology</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/boost_dijkstra.html">1. Boost Dijkstra Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/hanoslav.html">2. Internet Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/wiki_example.html">3. Wikipedia Dijkstra Example</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix-2.html">1. Appendix: Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix-3.html">2. Appendix: osm2pgrouting Import Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix-4.html">3. Video Tutorials for Workshop</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">4. Vehicle Routing</a><ul>
<li><a class="reference internal" href="#routing-for-vehicles">4.1. Routing for vehicles</a><ul>
<li><a class="reference internal" href="#exercise-1-vehicle-routing-going">4.1.1. Exercise 1: Vehicle routing - going</a></li>
<li><a class="reference internal" href="#exercise-2-vehicle-routing-returning">4.1.2. Exercise 2: Vehicle routing - returning</a></li>
<li><a class="reference internal" href="#exercise-3-vehicle-routing-when-time-is-money">4.1.3. Exercise 3: Vehicle routing when time is money</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cost-manipulations">4.2. Cost manipulations</a><ul>
<li><a class="reference internal" href="#exercise-4-vehicle-routing-without-penalization">4.2.1. Exercise 4: Vehicle routing without penalization</a></li>
<li><a class="reference internal" href="#exercise-5-vehicle-routing-with-penalization">4.2.2. Exercise 5: Vehicle routing with penalization</a></li>
<li><a class="reference internal" href="#exercise-6-time-in-seconds-of-penalized-route-using-a-view">4.2.3. Exercise 6: Time in seconds of penalized route using a view</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="pedestrian.html" title="Previous Chapter: 3. Pedestrian Routing"><span class="icon-chevron-left visible-tablet"></span><span class="hidden-sm hidden-tablet">&laquo; 3. Pedestrian Routing</span>
    </a>
  </li>
  <li>
    <a href="sql_function.html" title="Next Chapter: 5. SQL function"><span class="icon-chevron-right visible-tablet"></span><span class="hidden-sm hidden-tablet">5. SQL function &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
      </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body span12 content" role="main">
      
  <section id="vehicle-routing">
<h1><a class="toc-backref" href="#id1" role="doc-backlink"><span class="section-number">4. </span>Vehicle Routing</a><a class="headerlink" href="#vehicle-routing" title="Link to this heading">Â¶</a></h1>
<a class="reference internal image-reference" href="../_images/vehicle_route_coming.png"><img alt="../_images/vehicle_route_coming.png" class="align-center" src="../_images/vehicle_route_coming.png" style="width: 373.75px; height: 216.5px;" />
</a>
<p>Routing, is not limited to pedestrians and most of the time is used for routing vehicles.</p>
<nav class="contents" id="chapter-contents">
<p class="topic-title">Chapter Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#vehicle-routing" id="id1">Vehicle Routing</a></p>
<ul>
<li><p><a class="reference internal" href="#routing-for-vehicles" id="id2">Routing for vehicles</a></p>
<ul>
<li><p><a class="reference internal" href="#exercise-1-vehicle-routing-going" id="id3">Exercise 1: Vehicle routing - going</a></p></li>
<li><p><a class="reference internal" href="#exercise-2-vehicle-routing-returning" id="id4">Exercise 2: Vehicle routing - returning</a></p></li>
<li><p><a class="reference internal" href="#exercise-3-vehicle-routing-when-time-is-money" id="id5">Exercise 3: Vehicle routing when time is money</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#cost-manipulations" id="id6">Cost manipulations</a></p>
<ul>
<li><p><a class="reference internal" href="#exercise-4-vehicle-routing-without-penalization" id="id7">Exercise 4: Vehicle routing without penalization</a></p></li>
<li><p><a class="reference internal" href="#exercise-5-vehicle-routing-with-penalization" id="id8">Exercise 5: Vehicle routing with penalization</a></p></li>
<li><p><a class="reference internal" href="#exercise-6-time-in-seconds-of-penalized-route-using-a-view" id="id9">Exercise 6: Time in seconds of penalized route using a view</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="routing-for-vehicles">
<h2><a class="toc-backref" href="#id2" role="doc-backlink"><span class="section-number">4.1. </span>Routing for vehicles</a><a class="headerlink" href="#routing-for-vehicles" title="Link to this heading">Â¶</a></h2>
<p>A query for vehicle routing generally differs from routing for pedestrians:</p>
<ul class="simple">
<li><p>The road segments are considered <cite>directed</cite></p></li>
<li><p>Costs can be:</p>
<ul>
<li><p>Distance</p></li>
<li><p>Time</p></li>
<li><p>Euros</p></li>
<li><p>Pesos</p></li>
<li><p>Dollars</p></li>
<li><p>CO<sub>2</sub>emissions</p></li>
<li><p>Wear and tear on the vehicle, etc.</p></li>
</ul>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> attribute must be taken into account on two way streets.</p>
<ul>
<li><p>The costs should have the same units as the <code class="docutils literal notranslate"><span class="pre">cost</span></code> attribute</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> values can be different</p>
<ul>
<li><p>Due to the fact that there are roads that are <strong>one way</strong></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Depending on the geometry, the valid way:</p>
<ul class="simple">
<li><p>(<code class="docutils literal notranslate"><span class="pre">source,</span> <span class="pre">target</span></code>) segment <code class="docutils literal notranslate"><span class="pre">IF</span> <span class="pre">cost</span> <span class="pre">&gt;=</span> <span class="pre">0</span> <span class="pre">AND</span> <span class="pre">reverse_cost</span> <span class="pre">&lt;</span> <span class="pre">0</span></code></p></li>
<li><p>(<code class="docutils literal notranslate"><span class="pre">target,</span> <span class="pre">source</span></code>) segment <code class="docutils literal notranslate"><span class="pre">IF</span> <span class="pre">cost</span> <span class="pre">&lt;</span> <span class="pre">0</span> <span class="pre">AND</span> <span class="pre">reverse_cost</span> <span class="pre">&gt;=</span> <span class="pre">0</span></code></p></li>
</ul>
<p>A <strong>wrong way</strong> is indicated with a <strong>negative value</strong> and is not inserted in the
graph for processing.</p>
<p><strong>Two way</strong> roads - <code class="docutils literal notranslate"><span class="pre">IF</span> <span class="pre">cost</span> <span class="pre">&gt;=</span> <span class="pre">0</span> <span class="pre">AND</span> <span class="pre">reverse_cost</span> <span class="pre">&gt;=</span> <span class="pre">0</span></code> and their values can
be different. For example, it is faster going down hill on a sloped road.
In general, <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> do not need to be length; they can be
almost anything, for example - time, slope, surface, road type, etc., or they can
be a combination of multiple parameters.</p>
<p class="rubric">The following queries indicate the number of road segments, where a âone wayâ rule applies:</p>
<ol class="arabic">
<li><p>Number of (<code class="docutils literal notranslate"><span class="pre">source,</span> <span class="pre">target</span></code>) segments with <code class="docutils literal notranslate"><span class="pre">cost</span> <span class="pre">&lt;</span> <span class="pre">0</span></code> (line <strong>3</strong>).</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">vehicle_net</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">cost</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">count</span> 
<span class="o">-------</span>
     <span class="mi">0</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
</li>
<li><p>Number of (<code class="docutils literal notranslate"><span class="pre">target,</span> <span class="pre">source</span></code>) segments with <code class="docutils literal notranslate"><span class="pre">reverse_cost</span> <span class="pre">&lt;</span> <span class="pre">0</span></code> (line <strong>3</strong>).</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">vehicle_net</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">reverse_cost</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">count</span> 
<span class="o">-------</span>
  <span class="mi">3323</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
</li>
</ol>
<section id="exercise-1-vehicle-routing-going">
<h3><a class="toc-backref" href="#id3" role="doc-backlink"><span class="section-number">4.1.1. </span>Exercise 1: Vehicle routing - going</a><a class="headerlink" href="#exercise-1-vehicle-routing-going" title="Link to this heading">Â¶</a></h3>
<p class="rubric">Problem:</p>
<ul class="simple">
<li><p>From the âAuckland University of Technologyâ to the âFour Points by Sheratonâ by car.</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/vehicle_route_going.png"><img alt="From |place_1| to the |place_3| by car." src="../_images/vehicle_route_going.png" style="width: 373.75px; height: 216.5px;" />
</a>
<p class="rubric">Solution:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> columns, are in seconds.</p></li>
<li><p>The vehicle is going from vertex <code class="docutils literal notranslate"><span class="pre">10840</span></code> to <code class="docutils literal notranslate"><span class="pre">21570</span></code>.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">pgr_dijkstra</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;SELECT id, source, target, cost, reverse_cost</span>
<span class="s1">   FROM vehicle_net&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="mi">10840</span><span class="p">,</span><span class="w"> </span><span class="mi">21570</span><span class="p">,</span>
<span class="w">  </span><span class="n">directed</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">);</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="ebb22b47-6785-4b9e-803d-8ff0c36b4948" name="ebb22b47-6785-4b9e-803d-8ff0c36b4948" type="checkbox"><label class="sphinx_collapse__label" for="ebb22b47-6785-4b9e-803d-8ff0c36b4948"><i class="sphinx_collapse__icon"></i>Query results</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">seq</span> <span class="o">|</span> <span class="n">path_seq</span> <span class="o">|</span> <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">node</span>  <span class="o">|</span> <span class="n">edge</span>  <span class="o">|</span>        <span class="n">cost</span>         <span class="o">|</span>      <span class="n">agg_cost</span>       
<span class="o">-----+----------+-----------+---------+-------+-------+---------------------+---------------------</span>
   <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span> <span class="mi">10840</span> <span class="o">|</span> <span class="mi">11743</span> <span class="o">|</span> <span class="mf">0.47873348603083116</span> <span class="o">|</span>                   <span class="mi">0</span>
   <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span>  <span class="mi">2772</span> <span class="o">|</span>  <span class="mi">2129</span> <span class="o">|</span>   <span class="mf">4.528216273775755</span> <span class="o">|</span> <span class="mf">0.47873348603083116</span>
   <span class="mi">3</span> <span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span>  <span class="mi">1730</span> <span class="o">|</span>   <span class="mi">195</span> <span class="o">|</span>  <span class="mf">2.7548453654260876</span> <span class="o">|</span>   <span class="mf">5.006949759806586</span>
   <span class="mi">4</span> <span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">139</span> <span class="o">|</span>  <span class="mi">3109</span> <span class="o">|</span>   <span class="mf">3.437833412958484</span> <span class="o">|</span>   <span class="mf">7.761795125232673</span>
   <span class="mi">5</span> <span class="o">|</span>        <span class="mi">5</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span>  <span class="mi">2592</span> <span class="o">|</span>  <span class="mi">7640</span> <span class="o">|</span>    <span class="mf">3.43632478355273</span> <span class="o">|</span>  <span class="mf">11.199628538191158</span>
   <span class="mi">6</span> <span class="o">|</span>        <span class="mi">6</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span>  <span class="mi">6943</span> <span class="o">|</span>  <span class="mi">7641</span> <span class="o">|</span>   <span class="mf">2.140428036218822</span> <span class="o">|</span>  <span class="mf">14.635953321743887</span>
   <span class="mi">7</span> <span class="o">|</span>        <span class="mi">7</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span>  <span class="mi">2591</span> <span class="o">|</span>  <span class="mi">3108</span> <span class="o">|</span>   <span class="mf">2.486614067643271</span> <span class="o">|</span>   <span class="mf">16.77638135796271</span>
   <span class="mi">8</span> <span class="o">|</span>        <span class="mi">8</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span>  <span class="mi">1827</span> <span class="o">|</span>  <span class="mi">2232</span> <span class="o">|</span>   <span class="mf">5.798842588788195</span> <span class="o">|</span>   <span class="mf">19.26299542560598</span>
   <span class="mi">9</span> <span class="o">|</span>        <span class="mi">9</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span>    <span class="mi">52</span> <span class="o">|</span>  <span class="mi">3693</span> <span class="o">|</span>  <span class="mf">2.9932465256253153</span> <span class="o">|</span>  <span class="mf">25.061838014394173</span>
  <span class="mi">10</span> <span class="o">|</span>       <span class="mi">10</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span>  <span class="mi">3126</span> <span class="o">|</span>  <span class="mi">3111</span> <span class="o">|</span>   <span class="mf">4.145976425523106</span> <span class="o">|</span>   <span class="mf">28.05508454001949</span>
  <span class="mi">11</span> <span class="o">|</span>       <span class="mi">11</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span>  <span class="mi">2593</span> <span class="o">|</span>  <span class="mi">3112</span> <span class="o">|</span>    <span class="mf">2.60504415450021</span> <span class="o">|</span>  <span class="mf">32.201060965542595</span>
  <span class="mi">12</span> <span class="o">|</span>       <span class="mi">12</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span> <span class="mi">12515</span> <span class="o">|</span> <span class="mi">13331</span> <span class="o">|</span>  <span class="mf">1.9280593324206745</span> <span class="o">|</span>   <span class="mf">34.80610512004281</span>
  <span class="mi">13</span> <span class="o">|</span>       <span class="mi">13</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span>    <span class="mi">50</span> <span class="o">|</span>    <span class="mi">68</span> <span class="o">|</span>  <span class="mf">1.4727350461561834</span> <span class="o">|</span>   <span class="mf">36.73416445246348</span>
  <span class="mi">14</span> <span class="o">|</span>       <span class="mi">14</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span> <span class="mi">12513</span> <span class="o">|</span> <span class="mi">13329</span> <span class="o">|</span>   <span class="mf">9.036516693270448</span> <span class="o">|</span>   <span class="mf">38.20689949861966</span>
  <span class="mi">15</span> <span class="o">|</span>       <span class="mi">15</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span>  <span class="mi">5257</span> <span class="o">|</span> <span class="mi">32060</span> <span class="o">|</span>  <span class="mf">0.6693955562153374</span> <span class="o">|</span>   <span class="mf">47.24341619189011</span>
  <span class="mi">16</span> <span class="o">|</span>       <span class="mi">16</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span> <span class="mi">24128</span> <span class="o">|</span> <span class="mi">28456</span> <span class="o">|</span> <span class="mf">0.10802744210045317</span> <span class="o">|</span>   <span class="mf">47.91281174810545</span>
  <span class="mi">17</span> <span class="o">|</span>       <span class="mi">17</span> <span class="o">|</span>     <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">21570</span> <span class="o">|</span> <span class="mi">21570</span> <span class="o">|</span>    <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                   <span class="mi">0</span> <span class="o">|</span>    <span class="mf">48.0208391902059</span>
<span class="p">(</span><span class="mi">17</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
</section>
<section id="exercise-2-vehicle-routing-returning">
<h3><a class="toc-backref" href="#id4" role="doc-backlink"><span class="section-number">4.1.2. </span>Exercise 2: Vehicle routing - returning</a><a class="headerlink" href="#exercise-2-vehicle-routing-returning" title="Link to this heading">Â¶</a></h3>
<p class="rubric">Problem:</p>
<ul class="simple">
<li><p>From âFour Points by Sheratonâ to the âAuckland University of Technologyâ by car.</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/vehicle_route_coming.png"><img alt="From |place_3| to the |place_1| by car." src="../_images/vehicle_route_coming.png" style="width: 373.75px; height: 216.5px;" />
</a>
<p class="rubric">Solution:</p>
<ul class="simple">
<li><p>The vehicle is going from vertex <code class="docutils literal notranslate"><span class="pre">21570</span></code> to <code class="docutils literal notranslate"><span class="pre">10840</span></code>.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">pgr_dijkstra</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;SELECT id, source, target, cost, reverse_cost</span>
<span class="s1">  FROM vehicle_net&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="mi">21570</span><span class="p">,</span><span class="w"> </span><span class="mi">10840</span><span class="p">,</span>
<span class="w">  </span><span class="n">directed</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">);</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="4ea13776-7f0c-4ec9-970d-d9cbbcc86483" name="4ea13776-7f0c-4ec9-970d-d9cbbcc86483" type="checkbox"><label class="sphinx_collapse__label" for="4ea13776-7f0c-4ec9-970d-d9cbbcc86483"><i class="sphinx_collapse__icon"></i>Query results</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">seq</span> <span class="o">|</span> <span class="n">path_seq</span> <span class="o">|</span> <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">node</span>  <span class="o">|</span> <span class="n">edge</span>  <span class="o">|</span>        <span class="n">cost</span>         <span class="o">|</span>      <span class="n">agg_cost</span>       
<span class="o">-----+----------+-----------+---------+-------+-------+---------------------+---------------------</span>
   <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">21570</span> <span class="o">|</span> <span class="mi">28456</span> <span class="o">|</span> <span class="mf">0.10802744210045317</span> <span class="o">|</span>                   <span class="mi">0</span>
   <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">24128</span> <span class="o">|</span> <span class="mi">32060</span> <span class="o">|</span>  <span class="mf">0.6693955562153374</span> <span class="o">|</span> <span class="mf">0.10802744210045317</span>
   <span class="mi">3</span> <span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5257</span> <span class="o">|</span> <span class="mi">13329</span> <span class="o">|</span>   <span class="mf">9.036516693270448</span> <span class="o">|</span>  <span class="mf">0.7774229983157905</span>
   <span class="mi">4</span> <span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">12513</span> <span class="o">|</span>    <span class="mi">68</span> <span class="o">|</span>  <span class="mf">1.4727350461561834</span> <span class="o">|</span>   <span class="mf">9.813939691586238</span>
   <span class="mi">5</span> <span class="o">|</span>        <span class="mi">5</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">50</span> <span class="o">|</span> <span class="mi">27855</span> <span class="o">|</span>  <span class="mf">1.6655458734402127</span> <span class="o">|</span>  <span class="mf">11.286674737742421</span>
   <span class="mi">6</span> <span class="o">|</span>        <span class="mi">6</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">21129</span> <span class="o">|</span> <span class="mi">25248</span> <span class="o">|</span>   <span class="mf">4.144653000051305</span> <span class="o">|</span>  <span class="mf">12.952220611182634</span>
   <span class="mi">7</span> <span class="o">|</span>        <span class="mi">7</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">18723</span> <span class="o">|</span> <span class="mi">20687</span> <span class="o">|</span>  <span class="mf">2.6206781605972056</span> <span class="o">|</span>   <span class="mf">17.09687361123394</span>
   <span class="mi">8</span> <span class="o">|</span>        <span class="mi">8</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">14870</span> <span class="o">|</span> <span class="mi">28506</span> <span class="o">|</span>   <span class="mf">1.524397241067978</span> <span class="o">|</span>  <span class="mf">19.717551771831143</span>
   <span class="mi">9</span> <span class="o">|</span>        <span class="mi">9</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">21604</span> <span class="o">|</span> <span class="mi">19141</span> <span class="o">|</span>   <span class="mf">6.253506933089818</span> <span class="o">|</span>   <span class="mf">21.24194901289912</span>
  <span class="mi">10</span> <span class="o">|</span>       <span class="mi">10</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">60</span> <span class="o">|</span> <span class="mi">13567</span> <span class="o">|</span>   <span class="mf">10.28591973677657</span> <span class="o">|</span>  <span class="mf">27.495455945988937</span>
  <span class="mi">11</span> <span class="o">|</span>       <span class="mi">11</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">12756</span> <span class="o">|</span>  <span class="mi">6026</span> <span class="o">|</span>  <span class="mf">10.214118072291528</span> <span class="o">|</span>   <span class="mf">37.78137568276551</span>
  <span class="mi">12</span> <span class="o">|</span>       <span class="mi">12</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5396</span> <span class="o">|</span>  <span class="mi">3283</span> <span class="o">|</span>  <span class="mf">1.2483062975019286</span> <span class="o">|</span>   <span class="mf">47.99549375505703</span>
  <span class="mi">13</span> <span class="o">|</span>       <span class="mi">13</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2742</span> <span class="o">|</span>  <span class="mi">5819</span> <span class="o">|</span>   <span class="mf">2.071816418881872</span> <span class="o">|</span>   <span class="mf">49.24380005255896</span>
  <span class="mi">14</span> <span class="o">|</span>       <span class="mi">14</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5187</span> <span class="o">|</span>  <span class="mi">2978</span> <span class="o">|</span>  <span class="mf">1.3765106578828465</span> <span class="o">|</span>   <span class="mf">51.31561647144083</span>
  <span class="mi">15</span> <span class="o">|</span>       <span class="mi">15</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2482</span> <span class="o">|</span> <span class="mi">10669</span> <span class="o">|</span>  <span class="mf">0.8329460024758452</span> <span class="o">|</span>   <span class="mf">52.69212712932368</span>
  <span class="mi">16</span> <span class="o">|</span>       <span class="mi">16</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">9714</span> <span class="o">|</span>  <span class="mi">5993</span> <span class="o">|</span> <span class="mf">0.29778468305944983</span> <span class="o">|</span>   <span class="mf">53.52507313179952</span>
  <span class="mi">17</span> <span class="o">|</span>       <span class="mi">17</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5364</span> <span class="o">|</span>   <span class="mi">189</span> <span class="o">|</span> <span class="mf">0.14335971184450919</span> <span class="o">|</span>   <span class="mf">53.82285781485897</span>
  <span class="mi">18</span> <span class="o">|</span>       <span class="mi">18</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">135</span> <span class="o">|</span> <span class="mi">32433</span> <span class="o">|</span>  <span class="mf">0.8276170850779226</span> <span class="o">|</span>   <span class="mf">53.96621752670348</span>
  <span class="mi">19</span> <span class="o">|</span>       <span class="mi">19</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">24410</span> <span class="o">|</span> <span class="mi">20490</span> <span class="o">|</span>   <span class="mf">0.858204875728814</span> <span class="o">|</span>  <span class="mf">54.793834611781406</span>
  <span class="mi">20</span> <span class="o">|</span>       <span class="mi">20</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">9713</span> <span class="o">|</span> <span class="mi">10995</span> <span class="o">|</span>   <span class="mf">6.139003813872194</span> <span class="o">|</span>   <span class="mf">55.65203948751022</span>
  <span class="mi">21</span> <span class="o">|</span>       <span class="mi">21</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10058</span> <span class="o">|</span> <span class="mi">10996</span> <span class="o">|</span>    <span class="mf">8.68277688481894</span> <span class="o">|</span>  <span class="mf">61.791043301382416</span>
  <span class="mi">22</span> <span class="o">|</span>       <span class="mi">22</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10059</span> <span class="o">|</span>  <span class="mi">6050</span> <span class="o">|</span>  <span class="mf">3.1192281201356717</span> <span class="o">|</span>   <span class="mf">70.47382018620135</span>
  <span class="mi">23</span> <span class="o">|</span>       <span class="mi">23</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5420</span> <span class="o">|</span> <span class="mi">16176</span> <span class="o">|</span>   <span class="mf">1.866187551701395</span> <span class="o">|</span>   <span class="mf">73.59304830633702</span>
  <span class="mi">24</span> <span class="o">|</span>       <span class="mi">24</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">8188</span> <span class="o">|</span> <span class="mi">15771</span> <span class="o">|</span> <span class="mf">0.44856952104208003</span> <span class="o">|</span>   <span class="mf">75.45923585803843</span>
  <span class="mi">25</span> <span class="o">|</span>       <span class="mi">25</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2509</span> <span class="o">|</span>   <span class="mi">192</span> <span class="o">|</span>  <span class="mf">3.0105177566801102</span> <span class="o">|</span>    <span class="mf">75.9078053790805</span>
  <span class="mi">26</span> <span class="o">|</span>       <span class="mi">26</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">137</span> <span class="o">|</span>  <span class="mi">3319</span> <span class="o">|</span>  <span class="mf">1.6027639283163713</span> <span class="o">|</span>   <span class="mf">78.91832313576062</span>
  <span class="mi">27</span> <span class="o">|</span>       <span class="mi">27</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2772</span> <span class="o">|</span> <span class="mi">11743</span> <span class="o">|</span> <span class="mf">0.47873348603083116</span> <span class="o">|</span>     <span class="mf">80.521087064077</span>
  <span class="mi">28</span> <span class="o">|</span>       <span class="mi">28</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10840</span> <span class="o">|</span>    <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                   <span class="mi">0</span> <span class="o">|</span>   <span class="mf">80.99982055010783</span>
<span class="p">(</span><span class="mi">28</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On a directed graph, going and coming back routes, most of the time are different.</p>
</div>
</section>
<section id="exercise-3-vehicle-routing-when-time-is-money">
<h3><a class="toc-backref" href="#id5" role="doc-backlink"><span class="section-number">4.1.3. </span>Exercise 3: Vehicle routing when time is money</a><a class="headerlink" href="#exercise-3-vehicle-routing-when-time-is-money" title="Link to this heading">Â¶</a></h3>
<p class="rubric">Problem:</p>
<ul class="simple">
<li><p>From âFour Points by Sheratonâ to the âAuckland University of Technologyâ by taxi.</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/vehicle_time_is_money.png"><img alt="From |place_3| to |place_1| by taxi." src="../_images/vehicle_time_is_money.png" style="width: 300pt;" />
</a>
<p class="rubric">Solution:</p>
<ul class="simple">
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">taxi_net</span></code>.</p></li>
<li><p>The cost is <code class="docutils literal notranslate"><span class="pre">$100</span> <span class="pre">per</span> <span class="pre">hour</span></code>.</p>
<ul>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> columns, which are in seconds.</p>
<ul>
<li><p>The duration in hours is <code class="docutils literal notranslate"><span class="pre">cost</span> <span class="pre">/</span> <span class="pre">3600</span></code>.</p></li>
<li><p>The cost in <code class="docutils literal notranslate"><span class="pre">dollars</span></code> is <code class="docutils literal notranslate"><span class="pre">cost</span> <span class="pre">/</span> <span class="pre">3600</span> <span class="pre">*</span> <span class="pre">100</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>The vehicle is going from vertex <code class="docutils literal notranslate"><span class="pre">21570</span></code> to <code class="docutils literal notranslate"><span class="pre">10840</span></code>.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">pgr_dijkstra</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;SELECT id, source, target,</span>
<span class="s1">    cost / 3600 * 100 AS cost,</span>
<span class="s1">    reverse_cost / 3600 * 100 AS reverse_cost</span>
<span class="s1">   FROM taxi_net&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="mi">21570</span><span class="p">,</span><span class="w"> </span><span class="mi">10840</span><span class="p">);</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="c206f56e-2642-4b9c-9e0f-a3154b6dab6a" name="c206f56e-2642-4b9c-9e0f-a3154b6dab6a" type="checkbox"><label class="sphinx_collapse__label" for="c206f56e-2642-4b9c-9e0f-a3154b6dab6a"><i class="sphinx_collapse__icon"></i>Query results</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">seq</span> <span class="o">|</span> <span class="n">path_seq</span> <span class="o">|</span> <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">node</span>  <span class="o">|</span> <span class="n">edge</span>  <span class="o">|</span>         <span class="n">cost</span>          <span class="o">|</span>       <span class="n">agg_cost</span>        
<span class="o">-----+----------+-----------+---------+-------+-------+-----------------------+-----------------------</span>
   <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">21570</span> <span class="o">|</span> <span class="mi">28456</span> <span class="o">|</span> <span class="mf">0.0033008385086249585</span> <span class="o">|</span>                     <span class="mi">0</span>
   <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">24128</span> <span class="o">|</span> <span class="mi">32060</span> <span class="o">|</span>  <span class="mf">0.020453753106579754</span> <span class="o">|</span> <span class="mf">0.0033008385086249585</span>
   <span class="mi">3</span> <span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5257</span> <span class="o">|</span> <span class="mi">13329</span> <span class="o">|</span>    <span class="mf">0.2761157878499304</span> <span class="o">|</span>  <span class="mf">0.023754591615204712</span>
   <span class="mi">4</span> <span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">12513</span> <span class="o">|</span>    <span class="mi">68</span> <span class="o">|</span>   <span class="mf">0.04500023752143894</span> <span class="o">|</span>    <span class="mf">0.2998703794651351</span>
   <span class="mi">5</span> <span class="o">|</span>        <span class="mi">5</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">50</span> <span class="o">|</span> <span class="mi">27855</span> <span class="o">|</span>  <span class="mf">0.050891679466228724</span> <span class="o">|</span>   <span class="mf">0.34487061698657406</span>
   <span class="mi">6</span> <span class="o">|</span>        <span class="mi">6</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">21129</span> <span class="o">|</span> <span class="mi">25248</span> <span class="o">|</span>   <span class="mf">0.12664217500156766</span> <span class="o">|</span>    <span class="mf">0.3957622964528028</span>
   <span class="mi">7</span> <span class="o">|</span>        <span class="mi">7</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">18723</span> <span class="o">|</span> <span class="mi">20687</span> <span class="o">|</span>   <span class="mf">0.08007627712935907</span> <span class="o">|</span>    <span class="mf">0.5224044714543705</span>
   <span class="mi">8</span> <span class="o">|</span>        <span class="mi">8</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">14870</span> <span class="o">|</span> <span class="mi">28506</span> <span class="o">|</span>   <span class="mf">0.04657880458818822</span> <span class="o">|</span>    <span class="mf">0.6024807485837296</span>
   <span class="mi">9</span> <span class="o">|</span>        <span class="mi">9</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">21604</span> <span class="o">|</span> <span class="mi">19141</span> <span class="o">|</span>   <span class="mf">0.19107937851107779</span> <span class="o">|</span>    <span class="mf">0.6490595531719178</span>
  <span class="mi">10</span> <span class="o">|</span>       <span class="mi">10</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">60</span> <span class="o">|</span> <span class="mi">13567</span> <span class="o">|</span>    <span class="mf">0.3142919919570619</span> <span class="o">|</span>    <span class="mf">0.8401389316829956</span>
  <span class="mi">11</span> <span class="o">|</span>       <span class="mi">11</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">12756</span> <span class="o">|</span>  <span class="mi">6026</span> <span class="o">|</span>   <span class="mf">0.31209805220890785</span> <span class="o">|</span>    <span class="mf">1.1544309236400574</span>
  <span class="mi">12</span> <span class="o">|</span>       <span class="mi">12</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5396</span> <span class="o">|</span>  <span class="mi">3283</span> <span class="o">|</span>  <span class="mf">0.038142692423670035</span> <span class="o">|</span>    <span class="mf">1.4665289758489652</span>
  <span class="mi">13</span> <span class="o">|</span>       <span class="mi">13</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2742</span> <span class="o">|</span>  <span class="mi">5819</span> <span class="o">|</span>   <span class="mf">0.06330550168805721</span> <span class="o">|</span>    <span class="mf">1.5046716682726353</span>
  <span class="mi">14</span> <span class="o">|</span>       <span class="mi">14</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5187</span> <span class="o">|</span>  <span class="mi">2978</span> <span class="o">|</span>   <span class="mf">0.04206004787975365</span> <span class="o">|</span>    <span class="mf">1.5679771699606926</span>
  <span class="mi">15</span> <span class="o">|</span>       <span class="mi">15</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2482</span> <span class="o">|</span> <span class="mi">10669</span> <span class="o">|</span>  <span class="mf">0.025451127853428603</span> <span class="o">|</span>    <span class="mf">1.6100372178404463</span>
  <span class="mi">16</span> <span class="o">|</span>       <span class="mi">16</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">9714</span> <span class="o">|</span>  <span class="mi">5993</span> <span class="o">|</span>  <span class="mf">0.009098976426816523</span> <span class="o">|</span>     <span class="mf">1.635488345693875</span>
  <span class="mi">17</span> <span class="o">|</span>       <span class="mi">17</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5364</span> <span class="o">|</span>   <span class="mi">189</span> <span class="o">|</span>  <span class="mf">0.004380435639693337</span> <span class="o">|</span>    <span class="mf">1.6445873221206915</span>
  <span class="mi">18</span> <span class="o">|</span>       <span class="mi">18</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">135</span> <span class="o">|</span> <span class="mi">32433</span> <span class="o">|</span>  <span class="mf">0.025288299821825417</span> <span class="o">|</span>    <span class="mf">1.6489677577603847</span>
  <span class="mi">19</span> <span class="o">|</span>       <span class="mi">19</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">24410</span> <span class="o">|</span> <span class="mi">20490</span> <span class="o">|</span>   <span class="mf">0.02622292675838043</span> <span class="o">|</span>      <span class="mf">1.67425605758221</span>
  <span class="mi">20</span> <span class="o">|</span>       <span class="mi">20</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">9713</span> <span class="o">|</span> <span class="mi">10995</span> <span class="o">|</span>   <span class="mf">0.18758067209053927</span> <span class="o">|</span>    <span class="mf">1.7004789843405905</span>
  <span class="mi">21</span> <span class="o">|</span>       <span class="mi">21</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10058</span> <span class="o">|</span> <span class="mi">10996</span> <span class="o">|</span>   <span class="mf">0.26530707148057875</span> <span class="o">|</span>    <span class="mf">1.8880596564311298</span>
  <span class="mi">22</span> <span class="o">|</span>       <span class="mi">22</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10059</span> <span class="o">|</span>  <span class="mi">6050</span> <span class="o">|</span>   <span class="mf">0.09530974811525664</span> <span class="o">|</span>     <span class="mf">2.153366727911709</span>
  <span class="mi">23</span> <span class="o">|</span>       <span class="mi">23</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5420</span> <span class="o">|</span> <span class="mi">16176</span> <span class="o">|</span>   <span class="mf">0.05702239741309818</span> <span class="o">|</span>    <span class="mf">2.2486764760269655</span>
  <span class="mi">24</span> <span class="o">|</span>       <span class="mi">24</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">8188</span> <span class="o">|</span> <span class="mi">15771</span> <span class="o">|</span>  <span class="mf">0.013706290920730224</span> <span class="o">|</span>     <span class="mf">2.305698873440064</span>
  <span class="mi">25</span> <span class="o">|</span>       <span class="mi">25</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2509</span> <span class="o">|</span>   <span class="mi">192</span> <span class="o">|</span>   <span class="mf">0.09198804256522561</span> <span class="o">|</span>     <span class="mf">2.319405164360794</span>
  <span class="mi">26</span> <span class="o">|</span>       <span class="mi">26</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">137</span> <span class="o">|</span>  <span class="mi">3319</span> <span class="o">|</span>   <span class="mf">0.04897334225411135</span> <span class="o">|</span>    <span class="mf">2.4113932069260198</span>
  <span class="mi">27</span> <span class="o">|</span>       <span class="mi">27</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2772</span> <span class="o">|</span> <span class="mi">11743</span> <span class="o">|</span>  <span class="mf">0.014627967628719842</span> <span class="o">|</span>     <span class="mf">2.460366549180131</span>
  <span class="mi">28</span> <span class="o">|</span>       <span class="mi">28</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10840</span> <span class="o">|</span>    <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                     <span class="mi">0</span> <span class="o">|</span>     <span class="mf">2.474994516808851</span>
<span class="p">(</span><span class="mi">28</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Comparing with <a class="reference internal" href="#exercise-2-vehicle-routing-returning">Exercise 2: Vehicle routing - returning</a>:</p>
<ul class="simple">
<li><p>The total number of records are identical.</p></li>
<li><p>The node sequence is identical.</p></li>
<li><p>The edge sequence is identical.</p></li>
<li><p>The cost and agg_cost results are directly proportional.</p></li>
</ul>
</div>
</section>
</section>
<section id="cost-manipulations">
<h2><a class="toc-backref" href="#id6" role="doc-backlink"><span class="section-number">4.2. </span>Cost manipulations</a><a class="headerlink" href="#cost-manipulations" title="Link to this heading">Â¶</a></h2>
<p>In this workshop, costs are going to be manipulated using the <code class="docutils literal notranslate"><span class="pre">configuration</span></code> table.</p>
<section id="exercise-4-vehicle-routing-without-penalization">
<h3><a class="toc-backref" href="#id7" role="doc-backlink"><span class="section-number">4.2.1. </span>Exercise 4: Vehicle routing without penalization</a><a class="headerlink" href="#exercise-4-vehicle-routing-without-penalization" title="Link to this heading">Â¶</a></h3>
<p class="rubric">Problem:</p>
<ul class="simple">
<li><p>From the âFour Points by Sheratonâ to âAuckland University of Technologyâ</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/vehicle_route_coming.png"><img alt="From |place_3| to |place_1|" src="../_images/vehicle_route_coming.png" style="width: 373.75px; height: 216.5px;" />
</a>
<p class="rubric">Solution:</p>
<ul>
<li><p>Add a penalty column</p>
<ul class="simple">
<li><p>All roads have a <code class="docutils literal notranslate"><span class="pre">penalty</span></code> of <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">configuration</span>
  <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">IF</span> <span class="n">NOT</span> <span class="n">EXISTS</span> <span class="n">penalty</span> <span class="n">FLOAT</span> <span class="n">DEFAULT</span> <span class="mf">1.0</span><span class="p">;</span>

</pre></div>
</div>
</li>
<li><p>The vehicleâs cost in this case will be in penalized seconds.</p>
<ul class="simple">
<li><p>Costs are to be multiplied by <code class="code docutils literal notranslate"><span class="pre">penalty</span></code> (lines <strong>5</strong> and <strong>6</strong>).</p></li>
<li><p>Costs wonât change (<span class="math notranslate nohighlight">\(cost * 1 = cost\)</span>).</p></li>
</ul>
</li>
<li><p>The <code class="code docutils literal notranslate"><span class="pre">configuration</span></code> table is linked with the <code class="code docutils literal notranslate"><span class="pre">ways</span></code> table by the
<code class="code docutils literal notranslate"><span class="pre">tag_id</span></code> field using a <code class="docutils literal notranslate"><span class="pre">JOIN</span></code></p></li>
<li><p>The vehicle is going from vertex <code class="docutils literal notranslate"><span class="pre">21570</span></code> to vertex <code class="docutils literal notranslate"><span class="pre">10840</span></code>.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">pgr_dijkstra</span><span class="p">(</span>
<span class="linenos">2</span><span class="w">  </span><span class="s1">&#39;SELECT v.id, source, target,</span>
<span class="linenos">3</span><span class="s1">     CASE WHEN cost &lt;= 0 THEN -1 ELSE cost * penalty END AS cost,</span>
<span class="linenos">4</span><span class="s1">     CASE WHEN reverse_cost &lt;= 0 THEN -1 ELSE reverse_cost * penalty END AS reverse_cost</span>
<span class="linenos">5</span><span class="s1">   FROM vehicle_net AS v JOIN configuration</span>
<span class="linenos">6</span><span class="s1">   USING (tag_id)&#39;</span><span class="p">,</span>
<span class="linenos">7</span><span class="w">   </span><span class="mi">21570</span><span class="p">,</span><span class="w"> </span><span class="mi">10840</span><span class="p">);</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="2330a916-ba37-42fc-9cc7-2564efbc9427" name="2330a916-ba37-42fc-9cc7-2564efbc9427" type="checkbox"><label class="sphinx_collapse__label" for="2330a916-ba37-42fc-9cc7-2564efbc9427"><i class="sphinx_collapse__icon"></i>Query results</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">seq</span> <span class="o">|</span> <span class="n">path_seq</span> <span class="o">|</span> <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">node</span>  <span class="o">|</span> <span class="n">edge</span>  <span class="o">|</span>        <span class="n">cost</span>         <span class="o">|</span>      <span class="n">agg_cost</span>       
<span class="o">-----+----------+-----------+---------+-------+-------+---------------------+---------------------</span>
   <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">21570</span> <span class="o">|</span> <span class="mi">28456</span> <span class="o">|</span> <span class="mf">0.10802744210045317</span> <span class="o">|</span>                   <span class="mi">0</span>
   <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">24128</span> <span class="o">|</span> <span class="mi">32060</span> <span class="o">|</span>  <span class="mf">0.6693955562153374</span> <span class="o">|</span> <span class="mf">0.10802744210045317</span>
   <span class="mi">3</span> <span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5257</span> <span class="o">|</span> <span class="mi">13329</span> <span class="o">|</span>   <span class="mf">9.036516693270448</span> <span class="o">|</span>  <span class="mf">0.7774229983157905</span>
   <span class="mi">4</span> <span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">12513</span> <span class="o">|</span>    <span class="mi">68</span> <span class="o">|</span>  <span class="mf">1.4727350461561834</span> <span class="o">|</span>   <span class="mf">9.813939691586238</span>
   <span class="mi">5</span> <span class="o">|</span>        <span class="mi">5</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">50</span> <span class="o">|</span> <span class="mi">27855</span> <span class="o">|</span>  <span class="mf">1.6655458734402127</span> <span class="o">|</span>  <span class="mf">11.286674737742421</span>
   <span class="mi">6</span> <span class="o">|</span>        <span class="mi">6</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">21129</span> <span class="o">|</span> <span class="mi">25248</span> <span class="o">|</span>   <span class="mf">4.144653000051305</span> <span class="o">|</span>  <span class="mf">12.952220611182634</span>
   <span class="mi">7</span> <span class="o">|</span>        <span class="mi">7</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">18723</span> <span class="o">|</span> <span class="mi">20687</span> <span class="o">|</span>  <span class="mf">2.6206781605972056</span> <span class="o">|</span>   <span class="mf">17.09687361123394</span>
   <span class="mi">8</span> <span class="o">|</span>        <span class="mi">8</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">14870</span> <span class="o">|</span> <span class="mi">28506</span> <span class="o">|</span>   <span class="mf">1.524397241067978</span> <span class="o">|</span>  <span class="mf">19.717551771831143</span>
   <span class="mi">9</span> <span class="o">|</span>        <span class="mi">9</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">21604</span> <span class="o">|</span> <span class="mi">19141</span> <span class="o">|</span>   <span class="mf">6.253506933089818</span> <span class="o">|</span>   <span class="mf">21.24194901289912</span>
  <span class="mi">10</span> <span class="o">|</span>       <span class="mi">10</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">60</span> <span class="o">|</span> <span class="mi">13567</span> <span class="o">|</span>   <span class="mf">10.28591973677657</span> <span class="o">|</span>  <span class="mf">27.495455945988937</span>
  <span class="mi">11</span> <span class="o">|</span>       <span class="mi">11</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">12756</span> <span class="o">|</span>  <span class="mi">6026</span> <span class="o">|</span>  <span class="mf">10.214118072291528</span> <span class="o">|</span>   <span class="mf">37.78137568276551</span>
  <span class="mi">12</span> <span class="o">|</span>       <span class="mi">12</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5396</span> <span class="o">|</span>  <span class="mi">3283</span> <span class="o">|</span>  <span class="mf">1.2483062975019286</span> <span class="o">|</span>   <span class="mf">47.99549375505703</span>
  <span class="mi">13</span> <span class="o">|</span>       <span class="mi">13</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2742</span> <span class="o">|</span>  <span class="mi">5819</span> <span class="o">|</span>   <span class="mf">2.071816418881872</span> <span class="o">|</span>   <span class="mf">49.24380005255896</span>
  <span class="mi">14</span> <span class="o">|</span>       <span class="mi">14</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5187</span> <span class="o">|</span>  <span class="mi">2978</span> <span class="o">|</span>  <span class="mf">1.3765106578828465</span> <span class="o">|</span>   <span class="mf">51.31561647144083</span>
  <span class="mi">15</span> <span class="o">|</span>       <span class="mi">15</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2482</span> <span class="o">|</span> <span class="mi">10669</span> <span class="o">|</span>  <span class="mf">0.8329460024758452</span> <span class="o">|</span>   <span class="mf">52.69212712932368</span>
  <span class="mi">16</span> <span class="o">|</span>       <span class="mi">16</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">9714</span> <span class="o">|</span>  <span class="mi">5993</span> <span class="o">|</span> <span class="mf">0.29778468305944983</span> <span class="o">|</span>   <span class="mf">53.52507313179952</span>
  <span class="mi">17</span> <span class="o">|</span>       <span class="mi">17</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5364</span> <span class="o">|</span>   <span class="mi">189</span> <span class="o">|</span> <span class="mf">0.14335971184450919</span> <span class="o">|</span>   <span class="mf">53.82285781485897</span>
  <span class="mi">18</span> <span class="o">|</span>       <span class="mi">18</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">135</span> <span class="o">|</span> <span class="mi">32433</span> <span class="o">|</span>  <span class="mf">0.8276170850779226</span> <span class="o">|</span>   <span class="mf">53.96621752670348</span>
  <span class="mi">19</span> <span class="o">|</span>       <span class="mi">19</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">24410</span> <span class="o">|</span> <span class="mi">20490</span> <span class="o">|</span>   <span class="mf">0.858204875728814</span> <span class="o">|</span>  <span class="mf">54.793834611781406</span>
  <span class="mi">20</span> <span class="o">|</span>       <span class="mi">20</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">9713</span> <span class="o">|</span> <span class="mi">10995</span> <span class="o">|</span>   <span class="mf">6.139003813872194</span> <span class="o">|</span>   <span class="mf">55.65203948751022</span>
  <span class="mi">21</span> <span class="o">|</span>       <span class="mi">21</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10058</span> <span class="o">|</span> <span class="mi">10996</span> <span class="o">|</span>    <span class="mf">8.68277688481894</span> <span class="o">|</span>  <span class="mf">61.791043301382416</span>
  <span class="mi">22</span> <span class="o">|</span>       <span class="mi">22</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10059</span> <span class="o">|</span>  <span class="mi">6050</span> <span class="o">|</span>  <span class="mf">3.1192281201356717</span> <span class="o">|</span>   <span class="mf">70.47382018620135</span>
  <span class="mi">23</span> <span class="o">|</span>       <span class="mi">23</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5420</span> <span class="o">|</span> <span class="mi">16176</span> <span class="o">|</span>   <span class="mf">1.866187551701395</span> <span class="o">|</span>   <span class="mf">73.59304830633702</span>
  <span class="mi">24</span> <span class="o">|</span>       <span class="mi">24</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">8188</span> <span class="o">|</span> <span class="mi">15771</span> <span class="o">|</span> <span class="mf">0.44856952104208003</span> <span class="o">|</span>   <span class="mf">75.45923585803843</span>
  <span class="mi">25</span> <span class="o">|</span>       <span class="mi">25</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2509</span> <span class="o">|</span>   <span class="mi">192</span> <span class="o">|</span>  <span class="mf">3.0105177566801102</span> <span class="o">|</span>    <span class="mf">75.9078053790805</span>
  <span class="mi">26</span> <span class="o">|</span>       <span class="mi">26</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">137</span> <span class="o">|</span>  <span class="mi">3319</span> <span class="o">|</span>  <span class="mf">1.6027639283163713</span> <span class="o">|</span>   <span class="mf">78.91832313576062</span>
  <span class="mi">27</span> <span class="o">|</span>       <span class="mi">27</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2772</span> <span class="o">|</span> <span class="mi">11743</span> <span class="o">|</span> <span class="mf">0.47873348603083116</span> <span class="o">|</span>     <span class="mf">80.521087064077</span>
  <span class="mi">28</span> <span class="o">|</span>       <span class="mi">28</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10840</span> <span class="o">|</span>    <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                   <span class="mi">0</span> <span class="o">|</span>   <span class="mf">80.99982055010783</span>
<span class="p">(</span><span class="mi">28</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
</section>
<section id="exercise-5-vehicle-routing-with-penalization">
<h3><a class="toc-backref" href="#id8" role="doc-backlink"><span class="section-number">4.2.2. </span>Exercise 5: Vehicle routing with penalization</a><a class="headerlink" href="#exercise-5-vehicle-routing-with-penalization" title="Link to this heading">Â¶</a></h3>
<p class="rubric">Concept:</p>
<p>Change the cost values for the <code class="code docutils literal notranslate"><span class="pre">configuration</span></code> table, in such a way, that the</p>
<ul class="simple">
<li><p>Bicycle roads are not used.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">penalty</span> <span class="pre">&lt;</span> <span class="pre">0</span></code> makes the road not to be included in the graph.</p></li>
</ul>
</li>
<li><p>Using residential roads is not encouraged.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">penalty</span> <span class="pre">&gt;</span> <span class="pre">1</span></code> makes the road slower for the calculations.</p></li>
</ul>
</li>
<li><p>Using âfasterâ roads is highly encouraged.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">penalty</span> <span class="pre">&lt;</span> <span class="pre">1</span></code> makes the road faster for the calculations.</p></li>
</ul>
</li>
<li><p>All other roads are not penalized.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">penalty</span> <span class="pre">=</span> <span class="pre">1</span></code> does not modify the road times.</p></li>
</ul>
</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">penalty</span></code> values can be changed with <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> queries.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These values are an exaggeration.</p>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Not including cycleways</span>
<span class="k">UPDATE</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">penalty</span><span class="o">=-</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">tag_key</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;cycleway&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">tag_value</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;cycleway&#39;</span><span class="p">);</span>

<span class="c1">-- Penalizing with 5 times the costs the unknown</span>
<span class="k">UPDATE</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">penalty</span><span class="o">=</span><span class="mi">5</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">tag_value</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;unclassified&#39;</span><span class="p">);</span>

<span class="c1">-- Encuraging the use of &quot;fast&quot; roads</span>
<span class="k">UPDATE</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">penalty</span><span class="o">=</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">tag_value</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;tertiary&#39;</span><span class="p">);</span>
<span class="k">UPDATE</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">penalty</span><span class="o">=</span><span class="mi">0</span><span class="p">.</span><span class="mi">3</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">tag_value</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s1">&#39;primary&#39;</span><span class="p">,</span><span class="s1">&#39;primary_link&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;trunk&#39;</span><span class="p">,</span><span class="s1">&#39;trunk_link&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;motorway&#39;</span><span class="p">,</span><span class="s1">&#39;motorway_junction&#39;</span><span class="p">,</span><span class="s1">&#39;motorway_link&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;secondary&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p class="rubric">Problem:</p>
<ul class="simple">
<li><p>From the âFour Points by Sheratonâ to âAuckland University of Technologyâ with penalization.</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/vehicle_use_penalty.png"><img alt="From |place_3| to |place_1|" src="../_images/vehicle_use_penalty.png" style="width: 373.75px; height: 216.5px;" />
</a>
<p class="rubric">Solution:</p>
<ul class="simple">
<li><p>Using the same query from <a class="reference internal" href="#exercise-4-vehicle-routing-without-penalization">Exercise 4: Vehicle routing without penalization</a></p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">pgr_dijkstra</span><span class="p">(</span>
<span class="linenos">2</span><span class="w">  </span><span class="s1">&#39;SELECT v.id, source, target,</span>
<span class="linenos">3</span><span class="s1">     CASE WHEN cost &lt;= 0 THEN -1 ELSE cost * penalty END AS cost,</span>
<span class="linenos">4</span><span class="s1">     CASE WHEN reverse_cost &lt;= 0 THEN -1 ELSE reverse_cost * penalty END AS reverse_cost</span>
<span class="linenos">5</span><span class="s1">   FROM vehicle_net AS v JOIN configuration</span>
<span class="linenos">6</span><span class="s1">   USING (tag_id)&#39;</span><span class="p">,</span>
<span class="linenos">7</span><span class="w">   </span><span class="mi">21570</span><span class="p">,</span><span class="w"> </span><span class="mi">10840</span><span class="p">);</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="c6f33568-925c-4ceb-9f70-615c840aa6c4" name="c6f33568-925c-4ceb-9f70-615c840aa6c4" type="checkbox"><label class="sphinx_collapse__label" for="c6f33568-925c-4ceb-9f70-615c840aa6c4"><i class="sphinx_collapse__icon"></i>Query results</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">seq</span> <span class="o">|</span> <span class="n">path_seq</span> <span class="o">|</span> <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">node</span>  <span class="o">|</span> <span class="n">edge</span>  <span class="o">|</span>        <span class="n">cost</span>         <span class="o">|</span>      <span class="n">agg_cost</span>       
<span class="o">-----+----------+-----------+---------+-------+-------+---------------------+---------------------</span>
   <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">21570</span> <span class="o">|</span> <span class="mi">28456</span> <span class="o">|</span> <span class="mf">0.10802744210045317</span> <span class="o">|</span>                   <span class="mi">0</span>
   <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">24128</span> <span class="o">|</span> <span class="mi">32060</span> <span class="o">|</span>  <span class="mf">0.6693955562153374</span> <span class="o">|</span> <span class="mf">0.10802744210045317</span>
   <span class="mi">3</span> <span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5257</span> <span class="o">|</span> <span class="mi">13329</span> <span class="o">|</span>   <span class="mf">2.710955007981134</span> <span class="o">|</span>  <span class="mf">0.7774229983157905</span>
   <span class="mi">4</span> <span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">12513</span> <span class="o">|</span>    <span class="mi">68</span> <span class="o">|</span>   <span class="mf">0.441820513846855</span> <span class="o">|</span>  <span class="mf">3.4883780062969247</span>
   <span class="mi">5</span> <span class="o">|</span>        <span class="mi">5</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">50</span> <span class="o">|</span> <span class="mi">13331</span> <span class="o">|</span>  <span class="mf">0.5784177997262023</span> <span class="o">|</span>    <span class="mf">3.93019852014378</span>
   <span class="mi">6</span> <span class="o">|</span>        <span class="mi">6</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">12515</span> <span class="o">|</span>  <span class="mi">3112</span> <span class="o">|</span>  <span class="mf">0.7815132463500629</span> <span class="o">|</span>   <span class="mf">4.508616319869982</span>
   <span class="mi">7</span> <span class="o">|</span>        <span class="mi">7</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2593</span> <span class="o">|</span>    <span class="mi">69</span> <span class="o">|</span>  <span class="mf">1.1882274208144066</span> <span class="o">|</span>   <span class="mf">5.290129566220045</span>
   <span class="mi">8</span> <span class="o">|</span>        <span class="mi">8</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">51</span> <span class="o">|</span>    <span class="mi">71</span> <span class="o">|</span>  <span class="mf">0.8962911368747929</span> <span class="o">|</span>   <span class="mf">6.478356987034452</span>
   <span class="mi">9</span> <span class="o">|</span>        <span class="mi">9</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">52</span> <span class="o">|</span>  <span class="mi">2232</span> <span class="o">|</span>  <span class="mf">1.7396527766364585</span> <span class="o">|</span>   <span class="mf">7.374648123909245</span>
  <span class="mi">10</span> <span class="o">|</span>       <span class="mi">10</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">1827</span> <span class="o">|</span>  <span class="mi">3108</span> <span class="o">|</span>  <span class="mf">0.7459842202929813</span> <span class="o">|</span>   <span class="mf">9.114300900545704</span>
  <span class="mi">11</span> <span class="o">|</span>       <span class="mi">11</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2591</span> <span class="o">|</span>  <span class="mi">7641</span> <span class="o">|</span>  <span class="mf">0.6421284108656466</span> <span class="o">|</span>   <span class="mf">9.860285120838686</span>
  <span class="mi">12</span> <span class="o">|</span>       <span class="mi">12</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">6943</span> <span class="o">|</span>  <span class="mi">3695</span> <span class="o">|</span>  <span class="mf">0.5214952639619694</span> <span class="o">|</span>  <span class="mf">10.502413531704333</span>
  <span class="mi">13</span> <span class="o">|</span>       <span class="mi">13</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">3127</span> <span class="o">|</span> <span class="mi">11798</span> <span class="o">|</span>  <span class="mf">1.0967823583019742</span> <span class="o">|</span>  <span class="mf">11.023908795666301</span>
  <span class="mi">14</span> <span class="o">|</span>       <span class="mi">14</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10912</span> <span class="o">|</span>    <span class="mi">72</span> <span class="o">|</span>  <span class="mf">0.3460233099566256</span> <span class="o">|</span>  <span class="mf">12.120691153968275</span>
  <span class="mi">15</span> <span class="o">|</span>       <span class="mi">15</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">53</span> <span class="o">|</span>  <span class="mi">3105</span> <span class="o">|</span>  <span class="mf">0.5229677960189418</span> <span class="o">|</span>  <span class="mf">12.466714463924902</span>
  <span class="mi">16</span> <span class="o">|</span>       <span class="mi">16</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2589</span> <span class="o">|</span>  <span class="mi">8256</span> <span class="o">|</span>  <span class="mf">0.8333925915563629</span> <span class="o">|</span>  <span class="mf">12.989682259943844</span>
  <span class="mi">17</span> <span class="o">|</span>       <span class="mi">17</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">7485</span> <span class="o">|</span>  <span class="mi">9046</span> <span class="o">|</span>  <span class="mf">1.2087566165399386</span> <span class="o">|</span>  <span class="mf">13.823074851500207</span>
  <span class="mi">18</span> <span class="o">|</span>       <span class="mi">18</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">8185</span> <span class="o">|</span>  <span class="mi">7471</span> <span class="o">|</span>   <span class="mf">3.727292706451414</span> <span class="o">|</span>  <span class="mf">15.031831468040146</span>
  <span class="mi">19</span> <span class="o">|</span>       <span class="mi">19</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">6782</span> <span class="o">|</span> <span class="mi">11736</span> <span class="o">|</span>  <span class="mf">0.5780208911581656</span> <span class="o">|</span>   <span class="mf">18.75912417449156</span>
  <span class="mi">20</span> <span class="o">|</span>       <span class="mi">20</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10832</span> <span class="o">|</span>  <span class="mi">5738</span> <span class="o">|</span>   <span class="mf">0.438722564064248</span> <span class="o">|</span>  <span class="mf">19.337145065649725</span>
  <span class="mi">21</span> <span class="o">|</span>       <span class="mi">21</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5106</span> <span class="o">|</span>  <span class="mi">3326</span> <span class="o">|</span>  <span class="mf">4.8003389187170695</span> <span class="o">|</span>   <span class="mf">19.77586762971397</span>
  <span class="mi">22</span> <span class="o">|</span>       <span class="mi">22</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2779</span> <span class="o">|</span>  <span class="mi">2986</span> <span class="o">|</span>  <span class="mf">1.5968702789189304</span> <span class="o">|</span>  <span class="mf">24.576206548431042</span>
  <span class="mi">23</span> <span class="o">|</span>       <span class="mi">23</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2489</span> <span class="o">|</span>  <span class="mi">7534</span> <span class="o">|</span>  <span class="mf">1.0913500477998646</span> <span class="o">|</span>  <span class="mf">26.173076827349973</span>
  <span class="mi">24</span> <span class="o">|</span>       <span class="mi">24</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">6838</span> <span class="o">|</span>  <span class="mi">5684</span> <span class="o">|</span>  <span class="mf">0.9255899183097996</span> <span class="o">|</span>  <span class="mf">27.264426875149837</span>
  <span class="mi">25</span> <span class="o">|</span>       <span class="mi">25</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5056</span> <span class="o">|</span> <span class="mi">31963</span> <span class="o">|</span>  <span class="mf">0.4158018777811517</span> <span class="o">|</span>  <span class="mf">28.190016793459638</span>
  <span class="mi">26</span> <span class="o">|</span>       <span class="mi">26</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">24049</span> <span class="o">|</span> <span class="mi">20356</span> <span class="o">|</span> <span class="mf">0.10946156372551012</span> <span class="o">|</span>   <span class="mf">28.60581867124079</span>
  <span class="mi">27</span> <span class="o">|</span>       <span class="mi">27</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">662</span> <span class="o">|</span>  <span class="mi">2981</span> <span class="o">|</span> <span class="mf">0.29339123850275073</span> <span class="o">|</span>    <span class="mf">28.7152802349663</span>
  <span class="mi">28</span> <span class="o">|</span>       <span class="mi">28</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2486</span> <span class="o">|</span>  <span class="mi">6804</span> <span class="o">|</span> <span class="mf">0.36188335013367195</span> <span class="o">|</span>   <span class="mf">29.00867147346905</span>
  <span class="mi">29</span> <span class="o">|</span>       <span class="mi">29</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">6158</span> <span class="o">|</span>  <span class="mi">2988</span> <span class="o">|</span>  <span class="mf">0.8013970298756692</span> <span class="o">|</span>   <span class="mf">29.37055482360272</span>
  <span class="mi">30</span> <span class="o">|</span>       <span class="mi">30</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2491</span> <span class="o">|</span>  <span class="mi">2752</span> <span class="o">|</span> <span class="mf">0.36594918091932044</span> <span class="o">|</span>   <span class="mf">30.17195185347839</span>
  <span class="mi">31</span> <span class="o">|</span>       <span class="mi">31</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2274</span> <span class="o">|</span> <span class="mi">16030</span> <span class="o">|</span>  <span class="mf">1.0179201057541438</span> <span class="o">|</span>   <span class="mf">30.53790103439771</span>
  <span class="mi">32</span> <span class="o">|</span>       <span class="mi">32</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">6153</span> <span class="o">|</span>  <span class="mi">2993</span> <span class="o">|</span> <span class="mf">0.32044072843994303</span> <span class="o">|</span>  <span class="mf">31.555821140151853</span>
  <span class="mi">33</span> <span class="o">|</span>       <span class="mi">33</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2495</span> <span class="o">|</span>  <span class="mi">2983</span> <span class="o">|</span>  <span class="mf">0.2861199989602883</span> <span class="o">|</span>  <span class="mf">31.876261868591797</span>
  <span class="mi">34</span> <span class="o">|</span>       <span class="mi">34</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2487</span> <span class="o">|</span> <span class="mi">31962</span> <span class="o">|</span> <span class="mf">0.16860648712089596</span> <span class="o">|</span>  <span class="mf">32.162381867552085</span>
  <span class="mi">35</span> <span class="o">|</span>       <span class="mi">35</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">24048</span> <span class="o">|</span> <span class="mi">20355</span> <span class="o">|</span>  <span class="mf">0.4154298925170567</span> <span class="o">|</span>   <span class="mf">32.33098835467298</span>
  <span class="mi">36</span> <span class="o">|</span>       <span class="mi">36</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">14190</span> <span class="o">|</span>  <span class="mi">2990</span> <span class="o">|</span>  <span class="mf">2.0191197104192358</span> <span class="o">|</span>  <span class="mf">32.746418247190036</span>
  <span class="mi">37</span> <span class="o">|</span>       <span class="mi">37</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2493</span> <span class="o">|</span>  <span class="mi">2987</span> <span class="o">|</span>  <span class="mf">1.5692358319323405</span> <span class="o">|</span>   <span class="mf">34.76553795760927</span>
  <span class="mi">38</span> <span class="o">|</span>       <span class="mi">38</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2490</span> <span class="o">|</span>  <span class="mi">2985</span> <span class="o">|</span>  <span class="mf">2.4116057693791353</span> <span class="o">|</span>   <span class="mf">36.33477378954161</span>
  <span class="mi">39</span> <span class="o">|</span>       <span class="mi">39</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2488</span> <span class="o">|</span>  <span class="mi">2980</span> <span class="o">|</span>  <span class="mf">1.8108042421478487</span> <span class="o">|</span>  <span class="mf">38.746379558920744</span>
  <span class="mi">40</span> <span class="o">|</span>       <span class="mi">40</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2485</span> <span class="o">|</span> <span class="mi">11737</span> <span class="o">|</span>  <span class="mf">0.9927403858271847</span> <span class="o">|</span>   <span class="mf">40.55718380106859</span>
  <span class="mi">41</span> <span class="o">|</span>       <span class="mi">41</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10833</span> <span class="o">|</span>  <span class="mi">5970</span> <span class="o">|</span> <span class="mf">0.21972002333846727</span> <span class="o">|</span>   <span class="mf">41.54992418689577</span>
  <span class="mi">42</span> <span class="o">|</span>       <span class="mi">42</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5337</span> <span class="o">|</span>   <span class="mi">193</span> <span class="o">|</span>  <span class="mf">1.0274736660928296</span> <span class="o">|</span>   <span class="mf">41.76964421023424</span>
  <span class="mi">43</span> <span class="o">|</span>       <span class="mi">43</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">137</span> <span class="o">|</span>  <span class="mi">3319</span> <span class="o">|</span> <span class="mf">0.48082917849491136</span> <span class="o">|</span>   <span class="mf">42.79711787632707</span>
  <span class="mi">44</span> <span class="o">|</span>       <span class="mi">44</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2772</span> <span class="o">|</span> <span class="mi">11743</span> <span class="o">|</span> <span class="mf">0.47873348603083116</span> <span class="o">|</span>  <span class="mf">43.277947054821986</span>
  <span class="mi">45</span> <span class="o">|</span>       <span class="mi">45</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10840</span> <span class="o">|</span>    <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                   <span class="mi">0</span> <span class="o">|</span>   <span class="mf">43.75668054085282</span>
<span class="p">(</span><span class="mi">45</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Comparing with <a class="reference internal" href="#exercise-3-vehicle-routing-when-time-is-money">Exercise 3: Vehicle routing when time is money</a>:</p>
<ul class="simple">
<li><p>The total number of records changed.</p>
<ul>
<li><p>The node sequence changed.</p></li>
<li><p>The edge sequence changed.</p></li>
</ul>
</li>
<li><p>The costs do not change proportionally.</p></li>
</ul>
</div>
</section>
<section id="exercise-6-time-in-seconds-of-penalized-route-using-a-view">
<h3><a class="toc-backref" href="#id9" role="doc-backlink"><span class="section-number">4.2.3. </span>Exercise 6: Time in seconds of penalized route using a view</a><a class="headerlink" href="#exercise-6-time-in-seconds-of-penalized-route-using-a-view" title="Link to this heading">Â¶</a></h3>
<p class="rubric">Problem:</p>
<p>Get the times in seconds of a penalized route</p>
<p class="rubric">Solution:</p>
<ul>
<li><p>Create a penalized view by joining the <code class="docutils literal notranslate"><span class="pre">vehicle_net</span></code> joined with the
<code class="docutils literal notranslate"><span class="pre">configuration</span></code> table</p>
<ul>
<li><p>Use the inner query from <a class="reference internal" href="#exercise-5-vehicle-routing-with-penalization">Exercise 5: Vehicle routing with penalization</a></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">penalized</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span>
<span class="w">  </span><span class="n">v</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="k">source</span><span class="p">,</span><span class="w"> </span><span class="n">target</span><span class="p">,</span>
<span class="w">  </span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">cost</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="n">cost</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">penalty</span><span class="w"> </span><span class="k">END</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">cost</span><span class="p">,</span>
<span class="w">  </span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">reverse_cost</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="n">reverse_cost</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">penalty</span><span class="w"> </span><span class="k">END</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">reverse_cost</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">vehicle_net</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">configuration</span>
<span class="k">USING</span><span class="w"> </span><span class="p">(</span><span class="n">tag_id</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Get the route
<code class="docutils literal notranslate"><span class="pre">configuration</span></code> table</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">pgr_dijkstra</span><span class="p">(</span>
<span class="w">  </span><span class="err">$$</span>
<span class="w">  </span><span class="k">SELECT</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="k">source</span><span class="p">,</span><span class="w"> </span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="n">cost</span><span class="p">,</span><span class="w"> </span><span class="n">reverse_cost</span>
<span class="w">  </span><span class="k">FROM</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="c1">-- Nested call</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="n">edge</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">pgr_dijkstra</span><span class="p">(</span>
<span class="w">      </span><span class="s1">&#39;SELECT id, source, target, cost, reverse_cost</span>
<span class="s1">       FROM penalized&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="mi">21570</span><span class="p">,</span><span class="w"> </span><span class="mi">10840</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">edges_in_route</span>
<span class="w">  </span><span class="k">JOIN</span><span class="w"> </span><span class="n">vehicle_net</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="w">  </span><span class="err">$$</span><span class="p">,</span>
<span class="w">  </span><span class="mi">21570</span><span class="p">,</span><span class="w"> </span><span class="mi">10840</span><span class="p">);</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="6f93f752-6001-4aad-bb87-a5246f2ef31a" name="6f93f752-6001-4aad-bb87-a5246f2ef31a" type="checkbox"><label class="sphinx_collapse__label" for="6f93f752-6001-4aad-bb87-a5246f2ef31a"><i class="sphinx_collapse__icon"></i>Query results</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">seq</span> <span class="o">|</span> <span class="n">path_seq</span> <span class="o">|</span> <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">node</span>  <span class="o">|</span> <span class="n">edge</span>  <span class="o">|</span>        <span class="n">cost</span>         <span class="o">|</span>      <span class="n">agg_cost</span>       
<span class="o">-----+----------+-----------+---------+-------+-------+---------------------+---------------------</span>
   <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">21570</span> <span class="o">|</span> <span class="mi">28456</span> <span class="o">|</span> <span class="mf">0.10802744210045317</span> <span class="o">|</span>                   <span class="mi">0</span>
   <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">24128</span> <span class="o">|</span> <span class="mi">32060</span> <span class="o">|</span>  <span class="mf">0.6693955562153374</span> <span class="o">|</span> <span class="mf">0.10802744210045317</span>
   <span class="mi">3</span> <span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5257</span> <span class="o">|</span> <span class="mi">13329</span> <span class="o">|</span>   <span class="mf">9.036516693270448</span> <span class="o">|</span>  <span class="mf">0.7774229983157905</span>
   <span class="mi">4</span> <span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">12513</span> <span class="o">|</span>    <span class="mi">68</span> <span class="o">|</span>  <span class="mf">1.4727350461561834</span> <span class="o">|</span>   <span class="mf">9.813939691586238</span>
   <span class="mi">5</span> <span class="o">|</span>        <span class="mi">5</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">50</span> <span class="o">|</span> <span class="mi">13331</span> <span class="o">|</span>  <span class="mf">1.9280593324206745</span> <span class="o">|</span>  <span class="mf">11.286674737742421</span>
   <span class="mi">6</span> <span class="o">|</span>        <span class="mi">6</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">12515</span> <span class="o">|</span>  <span class="mi">3112</span> <span class="o">|</span>    <span class="mf">2.60504415450021</span> <span class="o">|</span>  <span class="mf">13.214734070163097</span>
   <span class="mi">7</span> <span class="o">|</span>        <span class="mi">7</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2593</span> <span class="o">|</span>    <span class="mi">69</span> <span class="o">|</span>  <span class="mf">3.9607580693813556</span> <span class="o">|</span>  <span class="mf">15.819778224663306</span>
   <span class="mi">8</span> <span class="o">|</span>        <span class="mi">8</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">51</span> <span class="o">|</span>    <span class="mi">71</span> <span class="o">|</span>  <span class="mf">2.9876371229159764</span> <span class="o">|</span>  <span class="mf">19.780536294044662</span>
   <span class="mi">9</span> <span class="o">|</span>        <span class="mi">9</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">52</span> <span class="o">|</span>  <span class="mi">2232</span> <span class="o">|</span>   <span class="mf">5.798842588788195</span> <span class="o">|</span>   <span class="mf">22.76817341696064</span>
  <span class="mi">10</span> <span class="o">|</span>       <span class="mi">10</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">1827</span> <span class="o">|</span>  <span class="mi">3108</span> <span class="o">|</span>   <span class="mf">2.486614067643271</span> <span class="o">|</span>  <span class="mf">28.567016005748833</span>
  <span class="mi">11</span> <span class="o">|</span>       <span class="mi">11</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2591</span> <span class="o">|</span>  <span class="mi">7641</span> <span class="o">|</span>   <span class="mf">2.140428036218822</span> <span class="o">|</span>  <span class="mf">31.053630073392103</span>
  <span class="mi">12</span> <span class="o">|</span>       <span class="mi">12</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">6943</span> <span class="o">|</span>  <span class="mi">3695</span> <span class="o">|</span>  <span class="mf">1.7383175465398983</span> <span class="o">|</span>   <span class="mf">33.19405810961093</span>
  <span class="mi">13</span> <span class="o">|</span>       <span class="mi">13</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">3127</span> <span class="o">|</span> <span class="mi">11798</span> <span class="o">|</span>  <span class="mf">3.6559411943399143</span> <span class="o">|</span>  <span class="mf">34.932375656150825</span>
  <span class="mi">14</span> <span class="o">|</span>       <span class="mi">14</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10912</span> <span class="o">|</span>    <span class="mi">72</span> <span class="o">|</span>  <span class="mf">1.1534110331887522</span> <span class="o">|</span>   <span class="mf">38.58831685049074</span>
  <span class="mi">15</span> <span class="o">|</span>       <span class="mi">15</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>    <span class="mi">53</span> <span class="o">|</span>  <span class="mi">3105</span> <span class="o">|</span>  <span class="mf">1.7432259867298063</span> <span class="o">|</span>  <span class="mf">39.741727883679495</span>
  <span class="mi">16</span> <span class="o">|</span>       <span class="mi">16</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2589</span> <span class="o">|</span>  <span class="mi">8256</span> <span class="o">|</span>  <span class="mf">2.7779753051878764</span> <span class="o">|</span>    <span class="mf">41.4849538704093</span>
  <span class="mi">17</span> <span class="o">|</span>       <span class="mi">17</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">7485</span> <span class="o">|</span>  <span class="mi">9046</span> <span class="o">|</span>  <span class="mf">4.0291887217997955</span> <span class="o">|</span>   <span class="mf">44.26292917559718</span>
  <span class="mi">18</span> <span class="o">|</span>       <span class="mi">18</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">8185</span> <span class="o">|</span>  <span class="mi">7471</span> <span class="o">|</span>  <span class="mf">12.424309021504714</span> <span class="o">|</span>   <span class="mf">48.29211789739698</span>
  <span class="mi">19</span> <span class="o">|</span>       <span class="mi">19</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">6782</span> <span class="o">|</span> <span class="mi">11736</span> <span class="o">|</span>   <span class="mf">1.926736303860552</span> <span class="o">|</span>   <span class="mf">60.71642691890169</span>
  <span class="mi">20</span> <span class="o">|</span>       <span class="mi">20</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10832</span> <span class="o">|</span>  <span class="mi">5738</span> <span class="o">|</span>  <span class="mf">1.4624085468808266</span> <span class="o">|</span>   <span class="mf">62.64316322276224</span>
  <span class="mi">21</span> <span class="o">|</span>       <span class="mi">21</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5106</span> <span class="o">|</span>  <span class="mi">3326</span> <span class="o">|</span>    <span class="mf">16.0011297290569</span> <span class="o">|</span>   <span class="mf">64.10557176964306</span>
  <span class="mi">22</span> <span class="o">|</span>       <span class="mi">22</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2779</span> <span class="o">|</span>  <span class="mi">2986</span> <span class="o">|</span>  <span class="mf">5.3229009297297685</span> <span class="o">|</span>   <span class="mf">80.10670149869996</span>
  <span class="mi">23</span> <span class="o">|</span>       <span class="mi">23</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2489</span> <span class="o">|</span>  <span class="mi">7534</span> <span class="o">|</span>  <span class="mf">3.6378334926662155</span> <span class="o">|</span>   <span class="mf">85.42960242842973</span>
  <span class="mi">24</span> <span class="o">|</span>       <span class="mi">24</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">6838</span> <span class="o">|</span>  <span class="mi">5684</span> <span class="o">|</span>  <span class="mf">3.0852997276993324</span> <span class="o">|</span>   <span class="mf">89.06743592109595</span>
  <span class="mi">25</span> <span class="o">|</span>       <span class="mi">25</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5056</span> <span class="o">|</span> <span class="mi">31963</span> <span class="o">|</span>  <span class="mf">1.3860062592705056</span> <span class="o">|</span>   <span class="mf">92.15273564879529</span>
  <span class="mi">26</span> <span class="o">|</span>       <span class="mi">26</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">24049</span> <span class="o">|</span> <span class="mi">20356</span> <span class="o">|</span> <span class="mf">0.36487187908503377</span> <span class="o">|</span>   <span class="mf">93.53874190806579</span>
  <span class="mi">27</span> <span class="o">|</span>       <span class="mi">27</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">662</span> <span class="o">|</span>  <span class="mi">2981</span> <span class="o">|</span>  <span class="mf">0.9779707950091691</span> <span class="o">|</span>   <span class="mf">93.90361378715082</span>
  <span class="mi">28</span> <span class="o">|</span>       <span class="mi">28</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2486</span> <span class="o">|</span>  <span class="mi">6804</span> <span class="o">|</span>  <span class="mf">1.2062778337789066</span> <span class="o">|</span>   <span class="mf">94.88158458215999</span>
  <span class="mi">29</span> <span class="o">|</span>       <span class="mi">29</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">6158</span> <span class="o">|</span>  <span class="mi">2988</span> <span class="o">|</span>  <span class="mf">2.6713234329188973</span> <span class="o">|</span>    <span class="mf">96.0878624159389</span>
  <span class="mi">30</span> <span class="o">|</span>       <span class="mi">30</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2491</span> <span class="o">|</span>  <span class="mi">2752</span> <span class="o">|</span>  <span class="mf">1.2198306030644015</span> <span class="o">|</span>    <span class="mf">98.7591858488578</span>
  <span class="mi">31</span> <span class="o">|</span>       <span class="mi">31</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2274</span> <span class="o">|</span> <span class="mi">16030</span> <span class="o">|</span>  <span class="mf">3.3930670191804793</span> <span class="o">|</span>   <span class="mf">99.97901645192219</span>
  <span class="mi">32</span> <span class="o">|</span>       <span class="mi">32</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">6153</span> <span class="o">|</span>  <span class="mi">2993</span> <span class="o">|</span>  <span class="mf">1.0681357614664768</span> <span class="o">|</span>  <span class="mf">103.37208347110267</span>
  <span class="mi">33</span> <span class="o">|</span>       <span class="mi">33</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2495</span> <span class="o">|</span>  <span class="mi">2983</span> <span class="o">|</span>  <span class="mf">0.9537333298676277</span> <span class="o">|</span>  <span class="mf">104.44021923256915</span>
  <span class="mi">34</span> <span class="o">|</span>       <span class="mi">34</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2487</span> <span class="o">|</span> <span class="mi">31962</span> <span class="o">|</span>  <span class="mf">0.5620216237363199</span> <span class="o">|</span>  <span class="mf">105.39395256243678</span>
  <span class="mi">35</span> <span class="o">|</span>       <span class="mi">35</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">24048</span> <span class="o">|</span> <span class="mi">20355</span> <span class="o">|</span>   <span class="mf">1.384766308390189</span> <span class="o">|</span>   <span class="mf">105.9559741861731</span>
  <span class="mi">36</span> <span class="o">|</span>       <span class="mi">36</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">14190</span> <span class="o">|</span>  <span class="mi">2990</span> <span class="o">|</span>   <span class="mf">6.730399034730786</span> <span class="o">|</span>  <span class="mf">107.34074049456328</span>
  <span class="mi">37</span> <span class="o">|</span>       <span class="mi">37</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2493</span> <span class="o">|</span>  <span class="mi">2987</span> <span class="o">|</span>   <span class="mf">5.230786106441135</span> <span class="o">|</span>  <span class="mf">114.07113952929406</span>
  <span class="mi">38</span> <span class="o">|</span>       <span class="mi">38</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2490</span> <span class="o">|</span>  <span class="mi">2985</span> <span class="o">|</span>   <span class="mf">8.038685897930451</span> <span class="o">|</span>  <span class="mf">119.30192563573519</span>
  <span class="mi">39</span> <span class="o">|</span>       <span class="mi">39</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2488</span> <span class="o">|</span>  <span class="mi">2980</span> <span class="o">|</span>    <span class="mf">6.03601414049283</span> <span class="o">|</span>  <span class="mf">127.34061153366564</span>
  <span class="mi">40</span> <span class="o">|</span>       <span class="mi">40</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2485</span> <span class="o">|</span> <span class="mi">11737</span> <span class="o">|</span>  <span class="mf">3.3091346194239493</span> <span class="o">|</span>  <span class="mf">133.37662567415848</span>
  <span class="mi">41</span> <span class="o">|</span>       <span class="mi">41</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10833</span> <span class="o">|</span>  <span class="mi">5970</span> <span class="o">|</span>  <span class="mf">0.7324000777948909</span> <span class="o">|</span>  <span class="mf">136.68576029358243</span>
  <span class="mi">42</span> <span class="o">|</span>       <span class="mi">42</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">5337</span> <span class="o">|</span>   <span class="mi">193</span> <span class="o">|</span>  <span class="mf">3.4249122203094324</span> <span class="o">|</span>  <span class="mf">137.41816037137733</span>
  <span class="mi">43</span> <span class="o">|</span>       <span class="mi">43</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>   <span class="mi">137</span> <span class="o">|</span>  <span class="mi">3319</span> <span class="o">|</span>  <span class="mf">1.6027639283163713</span> <span class="o">|</span>  <span class="mf">140.84307259168676</span>
  <span class="mi">44</span> <span class="o">|</span>       <span class="mi">44</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span>  <span class="mi">2772</span> <span class="o">|</span> <span class="mi">11743</span> <span class="o">|</span> <span class="mf">0.47873348603083116</span> <span class="o">|</span>  <span class="mf">142.44583652000313</span>
  <span class="mi">45</span> <span class="o">|</span>       <span class="mi">45</span> <span class="o">|</span>     <span class="mi">21570</span> <span class="o">|</span>   <span class="mi">10840</span> <span class="o">|</span> <span class="mi">10840</span> <span class="o">|</span>    <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                   <span class="mi">0</span> <span class="o">|</span>  <span class="mf">142.92457000603395</span>
<span class="p">(</span><span class="mi">45</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2010-2025 pgRouting Developers.<br/>
      Last updated on Oct 07, 2025.<br/>
    </p>
  </div>
</footer>
  </body>
</html>